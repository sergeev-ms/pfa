<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        caption="msg://systemStdEdit.caption" focusComponent="form"
        messagesPack="com.borets.pfa.web.screens.account.system.systemstd">
    <data>
        <instance id="systemStdDc" class="com.borets.pfa.entity.account.system.SystemStd">
            <view extends="_local">
                <property name="pumpModel"/>
                <property name="depth"/>
                <property name="motorType"/>
                <property name="intakeConfig"/>
                <property name="vaproConfig"/>
                <property name="sealConfig"/>
                <property name="pumpConfig"/>
                <property name="pumpMaterials"/>
                <property name="sealMaterials"/>
                <property name="motorMaterials"/>
            </view>
            <loader/>
        </instance>
        <collection id="detailsDc" class="com.borets.pfa.entity.account.system.SystemDetail">
            <view extends="_local">
                <property name="equipmentType" view="_minimal">
                    <property name="category"/>
                </property>
                <property name="partNumber" view="_minimal"/>
            </view>
            <loader id="detailsDl">
                <query>where e.system = :container_systemStdDc order by e.equipmentType.order</query>
            </loader>
        </collection>
        <collection id="equipmentTypesDc" class="com.borets.pfa.entity.account.appdata.EquipmentType">
            <view extends="_minimal">
                <property name="category" view="_minimal"/>
            </view>
            <loader id="equipmentTypesDl">
                <query>from pfa_EquipmentType e order by e.name</query>
            </loader>
        </collection>
        <collection id="pumpTypeOptionsDc" class="com.borets.pfa.entity.account.system.classification.PumpType" view="_minimal">
            <loader id="pumpTypeOptionsDl">
                <query>from pfa_PumpType e order by e.name</query>
            </loader>
        </collection>
        <collection id="depthOptionsDc" class="com.borets.pfa.entity.account.system.classification.Depth" view="_minimal">
            <loader id="depthOptionsDl">
                <query>from pfa_Depth e order by e.name</query>
            </loader>
        </collection>
        <collection id="motorTypeOptionsDc" class="com.borets.pfa.entity.account.system.classification.MotorType" view="_minimal">
            <loader id="motorTypeOptionsDl">
                <query>from pfa_MotorType e order by e.name</query>
            </loader>
        </collection>
        <collection id="intakeConfigOptionsDc" class="com.borets.pfa.entity.account.system.classification.IntakeConfig" view="_minimal">
            <loader id="intakeConfigOptionsDl">
                <query>from pfa_IntakeConfig e order by e.name</query>
            </loader>
        </collection>
        <collection id="vaproConfigOptionsDc" class="com.borets.pfa.entity.account.system.classification.VaproConfig" view="_minimal">
            <loader id="vaproConfigOptionsDl">
                <query>from pfa_VaproConfig e order by e.name</query>
            </loader>
        </collection>
        <collection id="sealConfigOptionsDc" class="com.borets.pfa.entity.account.system.classification.SealConfig" view="_minimal">
            <loader id="sealConfigOptionsDl">
                <query>from pfa_SealConfig e order by e.name</query>
            </loader>
        </collection>
        <collection id="pumpConfigOptionsDc" class="com.borets.pfa.entity.account.system.classification.PumpConfig" view="_minimal">
            <loader id="pumpConfigOptionsDl">
                <query>from pfa_PumpConfig e order by e.name</query>
            </loader>
        </collection>
        <collection id="materialsOptionsDc" class="com.borets.pfa.entity.account.system.classification.OtherMaterials" view="_minimal">
            <loader id="materialsConfigOptionsDl">
                <query>from pfa_OtherMaterials e order by e.name</query>
            </loader>
        </collection>
        <collection id="pumpMaterialsOptionsDc" class="com.borets.pfa.entity.account.system.classification.PumpMaterials" view="_minimal">
            <loader id="pumpMaterialsConfigOptionsDl">
                <query>from pfa_PumpMaterials e order by e.name</query>
            </loader>
        </collection>
    </data>
    <dialogMode height="600" width="800"/>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>
    <layout expand="detailsBox" spacing="true">
        <groupBox id="generalGb" caption="msg://generalGb.caption">
            <form id="form" dataContainer="systemStdDc" width="100%">
                <column width="100%">
                    <lookupField id="casingSizeField" property="casingSize" required="true"/>
                    <lookupField id="casingWeightField" property="casingWeight" required="true"/>
                    <lookupField id="pumpModelField" property="pumpModel" optionsContainer="pumpTypeOptionsDc" required="true"/>
                </column>
                <column width="100%">
                    <lookupField id="depthField" property="depth" optionsContainer="depthOptionsDc" required="true"/>
                    <lookupField id="motorTypeField" property="motorType" optionsContainer="motorTypeOptionsDc" required="true"/>
                    <lookupField id="intakeConfigField" property="intakeConfig" optionsContainer="intakeConfigOptionsDc" required="true"/>
                </column>
                <column width="100%">
                    <lookupField id="vaproConfigField" property="vaproConfig" optionsContainer="vaproConfigOptionsDc" required="true"/>
                    <lookupField id="sealConfigField" property="sealConfig" optionsContainer="sealConfigOptionsDc" required="true"/>
                    <lookupField id="pumpConfigField" property="pumpConfig" optionsContainer="pumpConfigOptionsDc" required="true"/>
                </column>
                <column width="100%">
                    <lookupField id="pumpMaterialsField" property="pumpMaterials" optionsContainer="pumpMaterialsOptionsDc" required="true"/>
                    <lookupField id="sealMaterialsField" property="sealMaterials" optionsContainer="materialsOptionsDc" required="true"/>
                    <lookupField id="motorMaterialsField" property="motorMaterials" optionsContainer="materialsOptionsDc" required="true"/>
                    <textField id="commentField" property="comment"/>
                </column>
            </form>
        </groupBox>
        <groupBox id="detailsBox" caption="msg://com.borets.pfa.entity.account.system/SystemStd.details" expand="detailsTable">
            <table id="detailsTable" dataContainer="detailsDc" width="100%" editable="true" sortable="false">
                <actions>
                    <action id="create" type="create"/>
                    <action id="remove" type="remove"/>
                    <action id="copy" trackSelection="true" caption="msg://detailsTable.copy.caption" icon="COPY"/>
                </actions>
                <columns>
                    <column id="equipmentType" generator="equipmentTypeGenerator" required="true"/>
                    <column id="equipmentType.category"/>
                    <column id="partNumber" generator="partNumberGenerator" required="true"/>
                    <column id="length" generator="lengthGenerator" width="100px" caption="msg://detailsTable.length.caption"/>
                </columns>
                <buttonsPanel>
                    <button action="detailsTable.create"/>
                    <button action="detailsTable.copy"/>
                    <button action="detailsTable.remove"/>
                </buttonsPanel>
                <rowsCount/>
            </table>
        </groupBox>
        <hbox id="editActions" spacing="true">
            <button id="commitAndCloseBtn" action="windowCommitAndClose"/>
            <button id="closeBtn" action="windowClose"/>
        </hbox>
    </layout>
</window>
